<?xml version="1.0"?>
<Container version="2">
  <Name>discord-voice-assistant</Name>
  <Repository>ghcr.io/dracoc77/openclaw_discord_voice_assistant:latest</Repository>
  <Registry>https://ghcr.io</Registry>
  <Network>bridge</Network>
  <MyIP/>
  <Shell>bash</Shell>
  <Privileged>false</Privileged>
  <Support/>
  <Project>https://github.com/DracoC77/openclaw_discord_voice_assistant</Project>
  <Overview>
    Discord Voice Assistant for OpenClaw.
    Joins Discord voice channels, listens for voice commands,
    communicates with your OpenClaw AI agent, and speaks responses back.
    Supports wake word detection, auto-join behavior, and Discord DAVE E2EE
    via an embedded Node.js voice bridge.
  </Overview>
  <Category>Tools: AI</Category>
  <WebUI/>
  <TemplateURL/>
  <Icon>https://raw.githubusercontent.com/DracoC77/openclaw_discord_voice_assistant/main/docs/icon.png</Icon>
  <ExtraParams>--restart=unless-stopped</ExtraParams>
  <PostArgs/>
  <CPUset/>
  <DateInstalled/>
  <DonateText/>
  <DonateLink/>
  <Requires>
    Requires a Discord Bot Token, an OpenClaw instance, and optionally an ElevenLabs API key for premium TTS.
  </Requires>
  <Config
    Name="Discord Bot Token"
    Target="DISCORD_BOT_TOKEN"
    Default=""
    Mode=""
    Description="Your Discord bot token from the Discord Developer Portal"
    Type="Variable"
    Display="always"
    Required="true"
    Mask="true"/>
  <Config
    Name="Bot Name"
    Target="BOT_NAME"
    Default="Clippy"
    Mode=""
    Description="Display name used in bot responses"
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="OpenClaw URL"
    Target="OPENCLAW_URL"
    Default="http://localhost:18789"
    Mode=""
    Description="URL of your OpenClaw Gateway (default port 18789, use container name if on same Docker network)"
    Type="Variable"
    Display="always"
    Required="true"
    Mask="false"/>
  <Config
    Name="OpenClaw API Key"
    Target="OPENCLAW_API_KEY"
    Default=""
    Mode=""
    Description="Gateway auth token (must match OPENCLAW_GATEWAY_TOKEN on the OpenClaw side)"
    Type="Variable"
    Display="always"
    Required="false"
    Mask="true"/>
  <Config
    Name="OpenClaw Agent ID"
    Target="OPENCLAW_AGENT_ID"
    Default="voice"
    Mode=""
    Description="OpenClaw agent ID for voice sessions. Create a dedicated 'voice' agent with a TTS-friendly system prompt (see README). Set to 'default' to use the default agent."
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="Piper Voice Model"
    Target="LOCAL_TTS_MODEL"
    Default="en_US-hfc_male-medium"
    Mode=""
    Description="Piper TTS voice model name. Auto-downloads from HuggingFace on first use. Examples: en_US-lessac-medium (female), en_US-ryan-high (male), en_GB-cori-high (British female). Full list: https://rhasspy.github.io/piper-samples/"
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="TTS Provider"
    Target="TTS_PROVIDER"
    Default="local"
    Mode=""
    Description="Text-to-speech provider: 'local' (Piper/espeak) or 'elevenlabs'"
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="ElevenLabs API Key"
    Target="ELEVENLABS_API_KEY"
    Default=""
    Mode=""
    Description="ElevenLabs API key (required if TTS_PROVIDER=elevenlabs)"
    Type="Variable"
    Display="always"
    Required="false"
    Mask="true"/>
  <Config
    Name="ElevenLabs Voice ID"
    Target="ELEVENLABS_VOICE_ID"
    Default="21m00Tcm4TlvDq8ikWAM"
    Mode=""
    Description="ElevenLabs voice ID (only used if TTS_PROVIDER=elevenlabs)"
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="STT Model Size"
    Target="STT_MODEL_SIZE"
    Default="base"
    Mode=""
    Description="Whisper model size: tiny, base, small, medium, large-v2, large-v3"
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="STT Device"
    Target="STT_DEVICE"
    Default="auto"
    Mode=""
    Description="Whisper inference device: cpu, cuda, auto (auto-detects GPU)"
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="STT Compute Type"
    Target="STT_COMPUTE_TYPE"
    Default="int8"
    Mode=""
    Description="Whisper quantization: int8, float16, float32 (int8 uses least RAM)"
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="STT Preload"
    Target="STT_PRELOAD"
    Default="true"
    Mode=""
    Description="Keep Whisper model in memory between voice sessions (true/false). When true, rejoins are instant. When false, saves memory when idle but adds a delay when joining voice."
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="Wake Word Enabled"
    Target="WAKE_WORD_ENABLED"
    Default="false"
    Mode=""
    Description="Enable wake word detection (true/false). Disabled by default â€” enable once the base voice loop is stable."
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="Wake Word Threshold"
    Target="WAKE_WORD_THRESHOLD"
    Default="0.5"
    Mode=""
    Description="Wake word detection sensitivity (0.0-1.0, higher = stricter, fewer false positives)"
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="Wake Word Model Path"
    Target="WAKE_WORD_MODEL_PATH"
    Default=""
    Mode=""
    Description="Path to a custom .tflite wake word model (leave empty for built-in defaults)"
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="Auto-Join Enabled"
    Target="AUTO_JOIN_ENABLED"
    Default="true"
    Mode=""
    Description="Auto-join voice channels when authorized users connect (true/false)"
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="Inactivity Timeout"
    Target="INACTIVITY_TIMEOUT"
    Default="300"
    Mode=""
    Description="Seconds of inactivity before leaving voice channel (0 to disable)"
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="Max Session Duration"
    Target="MAX_SESSION_DURATION"
    Default="0"
    Mode=""
    Description="Maximum session length in seconds (0 = unlimited)"
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="Authorized User IDs"
    Target="AUTHORIZED_USER_IDS"
    Default=""
    Mode=""
    Description="Comma-separated Discord user IDs (leave empty to allow all)"
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="Require Wake Word for Unauthorized"
    Target="REQUIRE_WAKE_WORD_FOR_UNAUTHORIZED"
    Default="true"
    Mode=""
    Description="Require wake word from non-authorized users (true/false). Only relevant when wake word is enabled."
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="Voice Bridge URL"
    Target="VOICE_BRIDGE_URL"
    Default="ws://localhost:9876"
    Mode=""
    Description="WebSocket URL for the Node.js voice bridge. Default (ws://localhost:9876) uses the embedded bridge. Change to ws://voice-bridge:9876 only if running as separate containers."
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="Voice Bridge Port"
    Target="BRIDGE_PORT"
    Default="9876"
    Mode=""
    Description="Port for the embedded voice bridge WebSocket server."
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="Log Level"
    Target="LOG_LEVEL"
    Default="INFO"
    Mode=""
    Description="Logging level: DEBUG, INFO, WARNING, ERROR"
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="Debug Voice Pipeline"
    Target="DEBUG_VOICE_PIPELINE"
    Default="false"
    Mode=""
    Description="Enable verbose debug logging for the voice pipeline (timing, audio stats, RMS values). Useful for diagnosing why the bot isn't responding."
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"/>
  <Config
    Name="Timezone"
    Target="TZ"
    Default="America/New_York"
    Mode=""
    Description="Container timezone"
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false"/>
  <Config
    Name="Data Directory"
    Target="/app/data"
    Default="/mnt/user/appdata/discord-voice-assistant/data"
    Mode="rw"
    Description="Persistent data (voice profiles, etc.)"
    Type="Path"
    Display="always"
    Required="true"
    Mask="false"/>
  <Config
    Name="Models Directory"
    Target="/app/models"
    Default="/mnt/user/appdata/discord-voice-assistant/models"
    Mode="rw"
    Description="AI model cache (Whisper, wake word, TTS models)"
    Type="Path"
    Display="always"
    Required="true"
    Mask="false"/>
  <Config
    Name="Logs Directory"
    Target="/app/logs"
    Default="/mnt/user/appdata/discord-voice-assistant/logs"
    Mode="rw"
    Description="Application logs"
    Type="Path"
    Display="advanced"
    Required="false"
    Mask="false"/>
</Container>
